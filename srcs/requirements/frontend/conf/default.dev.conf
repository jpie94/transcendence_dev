server {
	listen 443 ssl;
	listen [::]:443 ssl;

	ssl_protocols TLSv1.2 TLSv1.3;
	ssl_prefer_server_ciphers on;
	ssl_ciphers ECDH+AESGCM:ECDH+AES256:ECDH+AES128:DHE+AES128:!ADH:!AECDH:!MD5;

	ssl_certificate		/etc/ssl/certs/localhost.crt;
	ssl_certificate_key	/etc/ssl/certs/localhost.key;

	server_name localhost;

#	root /var/www/html;

#	index index.html;

	location / {
#		proxy_pass http://host.docker.internal:5173;
		proxy_pass http://127.0.0.1:5173;
		proxy_http_version 1.1;
		proxy_set_header Upgrade $http_upgrade;
		proxy_set_header Connection "upgrade";
		proxy_set_header Host $host;
	}

#	location ~* \.(jpg|jpeg|gif|css|png|js|ico|html|xml|txt)$ {
#		root /var/www/html;
#	}

	location /api/ {
		proxy_pass http://backend:3000;
		proxy_http_version 1.1;
		proxy_set_header Host $host;
		proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header Upgrade $http_upgrade;
		proxy_set_header Connection "upgrade";
	}

#	location /ws/ {
#		proxy_pass http://backend:3000;
#		proxy_http_version 1.1;
#		proxy_set_header Upgrade $http_upgrade;
#		proxy_set_header Connection "upgrade";
#	}

}